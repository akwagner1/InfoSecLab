# Introduction
This section provides a step-by-step walkthrough to configure a Windows Server 2022 virtual machine as a Domain Controller in the lab environment. The Domain Controller is responsible for managing user accounts, authentication, and permissions across the network. Follow each section carefully to ensure proper setup and functionality.
## Creating a new VM
1. Open your web browser and log into the VMware ESXi web client.
2. In the ESXi web client, go to Storage in the left-hand menu. Select the datastore where you want to upload the ISO (e.g., datastore1).
3. Click Datastore Browser. Inside the datastore browser, click Upload and choose the ISO image file from your local machine. Wait for the upload to complete. Once finished, the ISO image will be available in the datastore for use with virtual machines.
4. In the ESXi web client, click Create/Register VM.
5. Choose Create a new virtual machine and click Next.
6. Enter a name for the VM, such as DC-01.
7. Compatibility: Leave this at the default unless specific compatibility settings are required.
8. Guest OS Family: Select Windows. For Guest OD Version: Choose Microsoft Windows Server 2022 (64-bit).
9. Choose the datastore where the VM will be stored, then click Next.
10. Assign the desired number of CPUs (preferrably at least 2), amount of memory (4GB or higher), and hard drive space.
11. Select Datastore ISO File and browse to the Windows Server ISO file you uploaded earlier.
12. Review and select Finish.
## Installing Windows Server 2022
1. Start the VM from the Virtual Machines dashboard.
2. Once it boots, click Install Now on the main setup screen.
3. Choose Windows Server 2022 Standard (Desktop Experience) or Windows Server 2022 Datacenter (Desktop Experience). The Desktop Experience is recommended to have a GUI, which we will need for lab purposes.
4. Read and accept the license terms, then click Next.
5. Choose Custom: Install Windows only (advanced) to perform a fresh installation.
6. Choose the appropriate drive (if multiple drives are available, select the main one for OS installation) and click Next. The installation will begin, and the server will restart automatically after completion.
7. After the server restarts, you will be prompted to set up an administrator password. Enter a strong password and note it down securely.
8. After setting the password, log in to the Administrator account to finalize the setup. The Server Manager Dashboard should open automatically.
## Initial Configs
Once the OS is installed, login to the administrator account with the password you created during setup. Once you load into the desktop, the Server Manager Dashboard will open. This is where we will do the rest of our configuration. 
1. Click on Configure this local server.
2. Change the time zone to your appropriate zone.
3. Add static IP 192.168.0.102 and disable IPv6
4. In the upper right of the dashboard, click on Add Roles and Features. Install the following roles: DNS Server and Active Directory Domain Services.
5. Once installed, click on flag at the top right and Promote this server to a domain controller.
6. In this wizard, you will add a new forest. Name it according to what you desire your domain name to be. 
7. Follow the prompts, and leave everything else as is.
8. Once it is finished, reboot and change the computer name to what you want. I used DC-01 to help distinguish this as the domain controller. You will need to reboot again.
9. Create a new account for yourself using the Active Directory Users and Computers option under Tools. Add it to the appropriate admin groups, and disable default administrator account.
** Ensure you can properly login and utilize admin privileges with the new account before disabling the default admin account!
10. I disabled CTRL-ALT-DEL at the lock screen. Not only is it annoying as is, but it causes issues when inputting the keys from a local machine. Your local machine will take the key input in regards to itself, rather than the VM you are working with. You could select the Vmware option to input those keys directly into the VM, but I disabled the feature altogether.
From the VM OS: Local Security Policy > Local Policies > Security Options > Interactive logon: Do not require CTRL + ALT + DEL > Enabled
